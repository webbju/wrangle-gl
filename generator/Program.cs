////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using CommandLine;
using System;
using System.Diagnostics;
using System.IO;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace wrangle_gl_generator
{

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  class Program
  {

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    class Options
    {
      [Option('s', "api-spec", Required = true, HelpText = "Path to Registery specification (.xml).")]
      public string ApiSpec { get; set; }

      [Option('i', "api-type", Required = true, HelpText = "")]
      public string ApiType { get; set; }

      [Option('o', "output-dir", Required = true, HelpText = "Base output directory.")]
      public string OutputDir { get; set; }

      [Option('v', "verbose", Required = false, HelpText = "Set output to verbose messages.")]
      public bool Verbose { get; set; }
    }

    static int Main(string[] args)
    {
      Parser.Default.ParseArguments<Options>(args)
        .WithParsed<Options>(o =>
        {
          Generator generator;

          switch (o.ApiType)
          {
            case "egl":
              generator = new GeneratorEGL(o.ApiSpec);
              break;

            case "gl":
              generator = new GeneratorGL(o.ApiSpec);
              break;

            case "gles":
              generator = new GeneratorGLES(o.ApiSpec);
              break;

            case "glx":
              generator = new GeneratorGLX(o.ApiSpec);
              break;

            case "vulkan":
              generator = new GeneratorVulkan(o.ApiSpec);
              break;

            case "wgl":
              generator = new GeneratorWGL(o.ApiSpec);
              break;

            default:
              throw new ArgumentException("ApiType");
          }

          generator.Export(o.OutputDir);
        });

      return 0;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
